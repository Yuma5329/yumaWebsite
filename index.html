<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Beatboxer図鑑</title>
<style>
  :root{--bg:#0f1115;--fg:#e7e7e7;--card:#161a22;--muted:#9aa4b2;--border:#262b36;--accent:#6aa8ff}
  *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--fg)}
  .layout{display:grid;grid-template-columns:260px 1fr;min-height:100vh}
  @media (max-width:920px){ .layout{grid-template-columns:1fr} #sidebar{position:fixed;inset:0 auto 0 0;width:80%;max-width:320px;transform:translateX(-100%);transition:.2s;z-index:30} #sidebar.open{transform:none} .scrim{position:fixed;inset:0;background:#0008;display:none;z-index:20} .scrim.show{display:block}}
  header{grid-column:1/-1;display:flex;align-items:center;gap:10px;padding:12px 14px;border-bottom:1px solid var(--border);position:sticky;top:0;background:rgba(15,17,21,.8);backdrop-filter:blur(8px);z-index:10}
  #menuBtn{display:none}@media (max-width:920px){#menuBtn{display:inline-flex}}
  #q{flex:1;min-width:200px;padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg)}
  .btn{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);cursor:pointer}
  /* sidebar */
  #sidebar{border-right:1px solid var(--border);background:var(--card);padding:12px;overflow:auto}
  .secTitle{margin:6px 0 8px;font-size:13px;color:var(--muted)}
  .nav{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
  .nav button{all:unset;display:block;padding:8px 10px;border:1px solid var(--border);border-radius:10px;cursor:pointer}
  .nav button.active{border-color:var(--accent);box-shadow:0 0 0 1px var(--accent) inset}
  main{padding:16px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .thumb,iframe{width:100%;aspect-ratio:16/9;border:0;background:#000;display:block;object-fit:cover}
  .pad{padding:12px}
  .name{margin:.2em 0 .5em;font-size:18px}
  .meta{font-size:12px;color:var(--muted)}
  .tags{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
  .tag{font-size:11px;border:1px solid var(--border);border-radius:999px;padding:3px 8px}
  footer{color:var(--muted);font-size:12px;margin:24px 0}
</style>
</head>
<body>
  <div class="layout">
    <header>
      <button id="menuBtn" class="btn">☰</button>
      <h1 style="margin:0;font-size:20px">Beatboxer図鑑</h1>
      <input id="q" type="search" placeholder="検索（名前・特徴・タグ）">
      <button id="clearBtn" class="btn">クリア</button>
    </header>

    <aside id="sidebar">
      <div>
        <div class="secTitle">国籍で絞り込み</div>
        <div id="navCountry" class="nav"></div>
      </div>
      <div>
        <div class="secTitle">GBB年別で絞り込み</div>
        <div id="navGBB" class="nav"></div>
      </div>
      <div class="secTitle">選択を解除</div>
      <button id="resetBtn" class="btn" style="width:100%">すべて表示</button>
      <footer>※ GBB年は代表動画ベースの暫定タグを含みます。</footer>
    </aside>
    <div class="scrim" id="scrim"></div>

    <main>
      <div id="list" class="grid"></div>
    </main>
  </div>

<script>
/* ===== データ（必要に応じて随時追加） =====
 * gbb: ["GBB2019","GBB2023"] のように複数年タグ可
 * ytId があればクリックでページ内再生
 */
const DATA = [
  {name:"D-Low", country:"UK", features:"高速・高精度", tags:["キック","スピード"], gbb:["GBB2019"], ytId:"DFk6aVSWo7s", comment:"多彩な音と圧巻の構成。"},
  {name:"NaPoM", country:"USA", features:"ベース/グルーヴ", tags:["ベース","バトル"], gbb:["GBB2017"], ytId:"YYKMoZnuTJE", comment:"低音の安定感と展開力。"},
  {name:"Alem", country:"France", features:"王道/構成美", tags:["基礎","構成"], gbb:["GBB2015"], ytId:"vD2Xwg3p_14", comment:"基礎から完成度が高い。"},
  {name:"Reeps One", country:"UK", features:"音色表現", tags:["アート","実験"], gbb:[], ytId:"Xj6rAa3G7Hc", comment:"表現の幅を広げる存在。"},
  {name:"MB14", country:"France", features:"ルーパー/メロ", tags:["メロディ","ループ"], gbb:["GBB2016"], ytId:"LMSlQFVnyvQ", comment:"歌心のあるライン。"},
  {name:"SO-SO", country:"Japan", features:"ルーパー/個性派", tags:["日本","ループ"], gbb:["GBB2021"], ytId:"aD0hK0ZsQeI", comment:"世界基準の独自路線。"},
  {name:"RUSY", country:"Japan", features:"高速バトル", tags:["日本","スピード"], gbb:["GBB2023"], ytId:"n5T0Uu7kV2c", comment:"鋭いリズムと迫力。"},
  {name:"Kohey", country:"Japan", features:"メロ×ベース", tags:["日本","メロ"], gbb:[], ytId:"5Im1W7_5bGQ", comment:"歌と重低音の融合。"},
  {name:"HIKAKIN", country:"Japan", features:"先駆者", tags:["日本","レジェンド"], gbb:[], ytId:"0bkrhTwfK_w", comment:"国内シーンを切り開いた存在。"},
  {name:"SARUKANI", country:"Japan", features:"クルー", tags:["日本","チーム"], gbb:["GBB2022"], ytId:"FvFgxqX2D4E", comment:"連携が魅力の4人組。"}
];

// --------- UI生成（サイドメニュー） ----------
const navCountry = document.getElementById("navCountry");
const navGBB = document.getElementById("navGBB");
const countries = ["All", ...Array.from(new Set(DATA.map(d=>d.country)))];
const gbbYears = ["All", ...Array.from(new Set(DATA.flatMap(d=>d.gbb)))].sort();

let selCountry = "All";
let selGBB = "All";

function makeButtons(container, items, onClick, selected){
  container.innerHTML = items.map(v=>{
    const active = v===selected ? "active":"";
    return `<button class="${active}" data-v="${v}">${v}</button>`
  }).join("");
  container.querySelectorAll("button").forEach(btn=>{
    btn.addEventListener("click", ()=> onClick(btn.dataset.v));
  });
}
function refreshMenus(){
  makeButtons(navCountry, countries, (v)=>{ selCountry=v; refreshMenus(); render(); }, selCountry);
  makeButtons(navGBB, gbbYears, (v)=>{ selGBB=v; refreshMenus(); render(); }, selGBB);
}
refreshMenus();

// --------- 検索 & フィルタ & 描画 ----------
const elList = document.getElementById("list");
const q = document.getElementById("q");
const clearBtn = document.getElementById("clearBtn");
document.getElementById("resetBtn").onclick = ()=>{ selCountry="All"; selGBB="All"; q.value=""; refreshMenus(); render(); };

function thumbHTML(id, alt){
  const max = `https://i.ytimg.com/vi/${id}/maxresdefault.jpg`;
  const hq  = `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;
  return `<img class="thumb" src="${max}" onerror="this.onerror=null;this.src='${hq}'" alt="${alt}">`;
}
function cardHTML(p){
  const tags = [...p.tags, ...p.gbb].map(t=>`<span class="tag">${t}</span>`).join("");
  return `
    <article class="card">
      <div onclick="playVideo('${p.ytId}', this)">${thumbHTML(p.ytId, p.name)}</div>
      <div class="pad">
        <div class="name">${p.name}（${p.country}）</div>
        <div class="meta">特徴：${p.features}</div>
        <div class="tags">${tags}</div>
        <div class="meta" style="margin-top:6px">${p.comment}</div>
      </div>
    </article>`;
}
function normalize(x){ return (x||"").toLowerCase(); }

function render(){
  const term = normalize(q.value);
  const out = DATA.filter(p=>{
    if(selCountry!=="All" && p.country!==selCountry) return false;
    if(selGBB!=="All" && !p.gbb.includes(selGBB)) return false;
    if(term){
      const hay = normalize([p.name,p.country,p.features,p.tags.join(" "),p.gbb.join(" ")].join(" "));
      if(!hay.includes(term)) return false;
    }
    return true;
  });
  elList.innerHTML = out.map(cardHTML).join("");
}
q.addEventListener("input", render);
clearBtn.addEventListener("click", ()=>{ q.value=""; render(); });
render();

// --------- 再生 ---------
function playVideo(id, el){
  el.outerHTML = `<iframe src="https://www.youtube.com/embed/${id}?autoplay=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
}
window.playVideo = playVideo;

// --------- モバイル：サイドバー開閉 ----------
const sidebar = document.getElementById("sidebar");
const scrim = document.getElementById("scrim");
document.getElementById("menuBtn").onclick = ()=>{ sidebar.classList.add("open"); scrim.classList.add("show"); };
scrim.onclick = ()=>{ sidebar.classList.remove("open"); scrim.classList.remove("show"); };
</script>
</body>
</html>
