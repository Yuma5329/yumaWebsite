<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Beatboxer図鑑</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="layout">

    <!-- Header -->
    <header>
      <h1>Beatboxer図鑑</h1>
      <div id="authArea" style="margin-left:auto; display:flex; gap:.5rem; align-items:center;">
        <span id="userEmail" class="meta"></span>
        <button id="loginBtn" class="btn" type="button">ログイン</button>
        <button id="logoutBtn" class="btn" type="button" style="display:none;">ログアウト</button>
      </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" aria-label="メニュー">
      <div class="sidebar-header">
        <button id="sidebarToggle" class="sb-toggle" type="button"
                aria-label="サイドバーを閉じる" aria-expanded="true">← 折りたたむ</button>
      </div>
      <nav class="menu">
        <button class="menu-item active" id="menuHome">Beatboxer一覧</button>
      </nav>
      <footer class="menu-note">今後ここに他メニューを追加予定</footer>
    </aside>

    <!-- 折りたたみ時にだけ出る取っ手 -->
    <button id="sidebarHandle" class="sb-handle" type="button"
            aria-label="サイドバーを開く">→ ひらく</button>

    <!-- Main -->
    <main>

      <!-- 一覧 -->
      <section id="listView">
        <div id="toolbar" class="toolbar">
          <label class="ctl">
            <span>名前に含む</span>
            <input id="q" type="search" placeholder="例: so, napom, wing">
          </label>
          <label class="ctl">
            <span>国籍</span>
            <select id="filterCountry"></select>
          </label>
          <label class="ctl">
            <span>年齢（最小）</span>
            <input id="ageMin" type="number" inputmode="numeric" placeholder="任意">
          </label>
          <label class="ctl">
            <span>年齢（最大）</span>
            <input id="ageMax" type="number" inputmode="numeric" placeholder="任意">
          </label>
          <label class="ctl">
            <span>並び替え</span>
            <select id="sortBy">
              <option value="name-asc">名前：A → Z</option>
              <option value="name-desc">名前：Z → A</option>
            </select>
          </label>
          <button id="favOnlyBtn" type="button" class="toggle fav">☆ お気に入りのみ</button>
        </div>

        <div id="list" class="grid"></div>
      </section>

      <!-- 詳細 -->
      <section id="detailView" hidden>
        <nav class="detail-breadcrumb">
          <button id="backToList" class="btn">← 一覧へ戻る</button>
        </nav>
        <article id="profile" class="detail"></article>
      </section>
    </main>
  </div>

  <!-- ログイン／新規登録モーダル -->
  <div id="authBackdrop" class="modal-backdrop" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="authTitle">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <h3 id="authTitle">ログイン / 新規登録</h3>
        <button id="authClose" class="link-like" type="button">閉じる ✕</button>
      </div>
      <form id="authForm">
        <div class="row">
          <label for="authEmail">メールアドレス</label>
          <input id="authEmail" type="email" autocomplete="email" required>
        </div>
        <div class="row">
          <label for="authPassword">パスワード</label>
          <input id="authPassword" type="password" autocomplete="current-password" required>
        </div>
        <div id="authMsg" class="meta"></div>
        <div class="actions">
          <button id="btnSignUp"  class="btn" type="button">新規登録</button>
          <button id="btnSignIn"  class="btn" type="submit">ログイン</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Supabase UMD -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- 認証 -->
  <script src="auth.js"></script>
  <!-- アプリ本体 -->
  <script src="script.js"></script>
</body>
</html>
