/* ================================
   layout.css
   - ページ全体のレイアウト関連スタイル
   - ヘッダー、サイドバー、メインエリア、ツールバー、グリッド
   - サイドバーの開閉（折りたたみ）制御も含む
================================ */

/* === Layout grid === */
.layout {
  display: grid;
  grid-template-columns: var(--sidebarW) minmax(0, 1fr);
  grid-template-rows: var(--headerH) 1fr;
  column-gap: var(--gap);
  min-height: 100vh;
  width: 100vw;
}

/* === Header === */
header {
  grid-column: 1 / -1;
  position: sticky; top: 0; z-index: 10;
  display: flex; align-items: center; gap: var(--gap);
  padding-inline: clamp(.8rem, 2vw, 1.2rem);
  background: linear-gradient(to bottom, var(--elev), transparent 120%);
  backdrop-filter: saturate(120%) blur(6px);
}

h1 {
  margin: 0;
  font-size: clamp(1.1rem, 2.2vw, 1.4rem);
  font-weight: 700;
  letter-spacing: .02em;
}

/* === Sidebar === */
aside#sidebar {
  grid-column: 1; grid-row: 2;
  background: var(--card);
  padding: clamp(.6rem, 1.2vw, .9rem);
  position: sticky; top: var(--headerH);
  align-self: stretch;
  height: calc(100vh - var(--headerH));
  border-right: 1px solid var(--border-soft);
  overflow: auto;
  scrollbar-gutter: stable;
}

/* サイドバー上部の開閉ボタン */
.sidebar-header {
  display: flex;
  justify-content: flex-end;
  margin-bottom: .4rem;
}

.sb-toggle {
  border: 1px solid var(--border);
  background: #12161e;
  color: var(--fg);
  border-radius: .6rem;
  padding: .4rem .6rem;
  cursor: pointer;
  font-size: .9rem;
}

/* 折りたたみ時だけ画面に残る「取っ手」 */
.sb-handle {
  position: fixed;
  left: 6px;
  top: calc(var(--headerH) + 8px);
  padding: .35rem .55rem;
  border: 1px solid var(--border);
  border-radius: .6rem;
  background: var(--card);
  color: var(--fg);
  cursor: pointer;
  z-index: 20;
  display: none;
}

/* === Sidebar content === */
.menu {
  display: flex;
  flex-direction: column;
  gap: .5rem;
  padding-right: .4rem;
}

.menu-item {
  all: unset;
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: .6rem .8rem;
  border-radius: var(--radius);
  cursor: pointer;
  background: var(--card);
  transition: background .15s;
}

.menu-item:hover { background: #1e232c; }
.menu-item.active { background: #e5e7eb; color: #000; }
.menu-note { color: var(--muted); font-size: .9rem; margin: 1rem 0; }

/* === Main area === */
main {
  grid-column: 2; grid-row: 2; min-width: 0;
  padding: clamp(.8rem, 1.5vw, 1.2rem);
  height: calc(100vh - var(--headerH));
  overflow-y: auto;
  scrollbar-gutter: stable;
}

/* === Toolbar === */
.toolbar {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(12rem, 1fr));
  gap: var(--gap);
  padding: .8rem .2rem;
  margin: 0 0 calc(var(--gap)*1.6);
  background: color-mix(in oklab, var(--bg) 98%, transparent);
}

@media (max-width:900px) {
  .toolbar { grid-template-columns: 1fr 1fr; }
}

/* === Grid (cards) === */
.grid { display: grid; gap: var(--gap); }
@media (min-width:1200px) { .grid { grid-template-columns: repeat(4, 1fr); } }
@media (min-width:900px) and (max-width:1199px) { .grid { grid-template-columns: repeat(3, 1fr); } }
@media (min-width:600px) and (max-width:899px) { .grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width:599px) { .grid { grid-template-columns: 1fr; } }

/* === 折りたたみ時（Sidebar collapsed） === */
body.sidebar-collapsed .layout {
  grid-template-columns: 0 minmax(0, 1fr);
}

body.sidebar-collapsed #sidebar {
  width: 0;
  padding: 0;
  border-right: none;
  overflow: hidden;
}

body.sidebar-collapsed .sb-handle { display: block; }
